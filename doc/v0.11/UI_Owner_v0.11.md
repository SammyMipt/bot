# UI — Owner v0.10 (revD)

## Entry point (только Owner)
Если tg_id ∉ TELEGRAM_OWNER_IDS → ⛔ Доступ запрещён.
Если tg_id ∈ TELEGRAM_OWNER_IDS и не зарегистрирован →
```
👋 Добро пожаловать!
Ваш Telegram ID подтверждён как владелец курса.
[Начать регистрацию]
```
Навигация: [⬅️ Назад] [🏠 Главное меню]

---

## Главное меню
[⚙️ Управление курсом]
[👥 Люди и роли]
[📚 Материалы курса]
[🗄️ Архив]
[📊 Отчёты и аудит]
[👤 Имперсонизация]

(На всех экранах: [⬅️ Назад] [🏠 Главное меню])

---

## ⚙️ Управление курсом
- [Инициализация курса] → шаги: Параметры → weeks.csv → Подтверждение → Готово
- [Общие сведения] (просмотр/редактирование параметров)
- [Загрузка недель (CSV)] (доп. импорт)

Подсказки/ошибки:
- «Загрузите weeks.csv. Формат: week_id,topic,description,deadline»
- ⛔ Ошибка формата CSV (лишние/неверные колонки)
- ⛔ Некорректная дата дедлайна

---

## 👥 Люди и роли
- [Импорт студентов (CSV)] → отчёт: «Импорт завершён: 120 строк, ошибок 2»
- [Импорт преподавателей (CSV)]
- [Поиск профиля] → поле ввода ФИО (prefix), карточка профиля
- [Создать матрицу назначений] → предпросмотр таблицы (студенты×недели→преподаватели) → [Подтвердить]

Edge toasts:
- ⚠️ Импорт дублируется по checksum — пропущено
- ⚠️ Лишние колонки CSV — строки проигнорированы

---

## 📚 Материалы курса
Выбор недели Wxx →
```
[📖 Домашние задачи и материалы для подготовки]  (t=p)
[📘 Методические рекомендации]                   (t=m)  # единообразно m
[📝 Конспект]                                    (t=n)
[📊 Презентация]                                 (t=s)
[🎥 Записи лекций]                               (t=v)
```
Карточка материала:
[⬆️ Загрузить] [📂 Скачать активное] [🕓 История] [🗄️ В архив] [🗑️ Удалить (из архива)]

Политика версий: одна активная версия на тип; **архив ≤ 20 версий**; при превышении — автоочистка самых старых после бэкапа.

Edge toasts:
- ⚠️ Файл идентичен активной версии — загрузка пропущена
- ⚠️ Удалены старые архивные версии: N

---

## 🗄️ Архив
- [Материалы] → выбрать неделю, список архивных версий → [📂 Скачать всё] [🗑️ Удалить всё]
- [Работы студентов] → ввести фамилию → выбрать неделю → [📂 Скачать всё] [🗑️ Удалить всё]

---

## 📊 Отчёты и аудит
- [📥 Экспорт AuditLog]
- [📥 Экспорт оценок]
- [📥 Экспорт assignment matrix]
- [📥 Экспорт курса]
- **Бэкап**: «Плановый бэкап ежедневно в 03:00 UTC»
  - [📦 Запустить бэкап сейчас] *(только вне имперсонизации)*

Toasts:
- ✅ Бэкап запущен
- ⛔ Бэкап недоступен в режиме имперсонизации

---

## 👤 Имперсонизация
До старта: «Введите tg_id для имперсонизации» → [Продолжить]
Если tg_id не найден → ❌ Пользователь не найден.

После старта:
- Бейдж вверху: `IMPERSONATING: Иванов И.И. (student)`
- Кнопки внизу:
  - [🎓 Главное меню студента] (если роль student)
  - [📚 Главное меню преподавателя] (если роль teacher)
  - [↩️ Завершить имперсонизацию]

Ограничения (disabled):
- Инициализация курса
- Бэкапы/восстановление
- Безвозвратное удаление из архива
- Изменение матрицы назначений
- Загрузка/удаление материалов
