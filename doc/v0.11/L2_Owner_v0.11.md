# L2_Owner_v0.11 (UX/Flows)

## 0. Изменения против v0.10
- Добавлен режим имперсонизации (start/stop, TTL 30 мин, явный индикатор в UI).
- Импорты разделены: Teachers (TA) и Students — отдельные шаблоны.
- Все даты/время показываются форматом `YYYY-MM-DD HH:MM (Europe/Moscow) · у вас сейчас ≈ HH:MM`.
- Кнопки используют короткие `op` + `state_store` (без JSON в callback).
- Тяжёлые операции запрещены без `backup_recent()`.

## 1. Главное меню Owner
- Импорт пользователей (TA / Students)
- Материалы курса (загрузка/архив)
- Экспорт/Аудит
- Имперсонизация
- Настройки

### 1.1 Имперсонизация
Flow:

1) Выбор роли (Teacher/Student) → ввод/выбор ID (TAxx/STxxx)

2) Подтверждение → старт сессии на 30 минут

3) Любой экран показывает: «Режим: как <роль> <ID>, осталось: N мин»

4) Кнопка «Выйти из режима» — всегда доступна, идемпотентна

Ошибки: `E_IMPERSONATE_FORBIDDEN`, `E_IMPERSONATE_ACTIVE`, `E_IMPERSONATE_EXPIRED`.

### 1.2 Импорт Teachers (TA)
- Кнопка «Шаблон CSV» (отдаём заголовки `surname,name,patronymic,email`).

- Загрузка: проверка размера ≤10MB, структура, валидации (см. L3_Owner §3.1).

- Отчёт об ошибках — CSV `row_index,field,error_code,message`.

- Успех: количество созданных TA + список присвоенных Humanized ID.

### 1.3 Импорт Students
- Шаблон: `surname,name,patronymic,email,group`.

- Валидации и отчёт — см. L3_Owner §3.2.

### 1.4 Материалы курса
- Загрузка файла (≤50MB) в неделю Wxx.

- Формат времени и отображение дедлайнов — единый (см. Common).

- Архивирование/восстановление материалов.

### 1.5 Экспорт/Аудит
- Доступно только при `backup_recent()`.

- Форматы: CSV/XLSX/ZIP; готовые файлы доступны для скачивания.

## 2. Общие правила UI
- Всегда показываем время в едином формате.

- Любая кнопка — короткий `op` (альфа-цифровой ≤6 символов) + ключ `uuid`.

- Ошибки показываются человекочитаемо, но содержат код (`E_*`) для поддержки.
